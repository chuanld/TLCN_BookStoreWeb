{"ast":null,"code":"var _jsxFileName = \"E:\\\\HK1_Nam4\\\\TLCN\\\\bookstore_website\\\\client\\\\src\\\\features\\\\infor\\\\profile\\\\Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport \"./profile.css\";\nimport { GlobalState } from \"../../../GlobalState\";\nimport axios from \"axios\";\nimport dateFormat from \"dateformat\";\nimport { AccountCircle, PermIdentity, Settings } from \"@material-ui/icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [isLogged] = state.userApi.isLogged;\n  const [infor] = state.userApi.infor;\n  const [token] = state.token;\n  const [user, setUser] = useState({\n    name: \"\",\n    address: \"\",\n    phone: \"\",\n    password: \"\",\n    newPassword: \"\",\n    confirmNewpass: \"\"\n  });\n  const {\n    name,\n    address,\n    phone,\n    password,\n    newPassword,\n    confirmNewpass\n  } = user;\n\n  const onChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setUser({ ...user,\n      [name]: value\n    });\n  }; //update info\n\n\n  const updateInfo = async e => {\n    e.preventDefault();\n\n    try {\n      console.log(token);\n      const result = await axios.patch(\"/user/update\", {\n        name: name ? name : infor.name,\n        address: address ? address : infor.address,\n        phone: phone ? phone : infor.phone\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      alert(result.data.msg);\n      window.location.href = \"/infor\";\n    } catch (err) {\n      alert(err.response.data.msg);\n    }\n  }; //update password\n\n\n  const updatePassword = async e => {\n    e.preventDefault();\n\n    try {\n      console.log(token);\n      if (password === \"\" || newPassword === \"\" || confirmNewpass === \"\") return setUser({ ...user\n      }, alert(\"Require input if you want change password\"));\n      if (newPassword.length < 6) return setUser({ ...user\n      }, alert(\"New password must be least 6 character\"));\n      if (newPassword !== confirmNewpass) return setUser({ ...user\n      }, alert(\"Confirm new password does not match!\"));\n      const result = await axios.patch(\"/user/change\", {\n        password: password,\n        newPassword: newPassword\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      window.location.href = \"/infor\";\n      alert(result.data.msg);\n    } catch (err) {\n      alert(err.response.data.msg);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isLogged ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userTitleContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"userTitle\",\n          children: [/*#__PURE__*/_jsxDEV(Settings, {\n            className: \"userTitleIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this), \"My Profile\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userShow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"userShowTop\",\n            children: [/*#__PURE__*/_jsxDEV(AccountCircle, {\n              className: \"userShowImg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"userShowTopTitle\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"userShowUsername\",\n                children: infor.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"userShowUserTitle\",\n                children: infor.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"userShowBottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"userShowTitle\",\n              children: \"Account Detail\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"userShowInfo\",\n              children: [/*#__PURE__*/_jsxDEV(PermIdentity, {\n                className: \"userShowIcon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"userShowInfoTitle\",\n                children: [\"Name: \", infor.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"userShowInfo\",\n              children: [/*#__PURE__*/_jsxDEV(PermIdentity, {\n                className: \"userShowIcon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"userShowInfoTitle\",\n                children: [\"Phone: \", infor.phone]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"userShowInfo\",\n              children: [/*#__PURE__*/_jsxDEV(PermIdentity, {\n                className: \"userShowIcon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"userShowInfoTitle\",\n                children: [\"Address: \", infor.address]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"userShowInfo\",\n              children: [/*#__PURE__*/_jsxDEV(PermIdentity, {\n                className: \"userShowIcon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"userShowInfoTitle\",\n                children: [\"Role: \", infor.role === 0 ? \"User Account\" : \"Admin Account\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"userShowInfo\",\n              children: [/*#__PURE__*/_jsxDEV(PermIdentity, {\n                className: \"userShowIcon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"userShowInfoTitle\",\n                children: [\"Date join: \", dateFormat(infor.createdAt)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"userShowInfo\",\n              children: [/*#__PURE__*/_jsxDEV(PermIdentity, {\n                className: \"userShowIcon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"userShowInfoTitle\",\n                children: [\"Last update: \", dateFormat(infor.updatedAt)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userUpdate\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"userUpdateTitle\",\n            children: \"Edit Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"userUpdateContainer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"userUpdateLeft\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"userUpdateInfo\",\n                onSubmit: updateInfo,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"userUpdateItem\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"name\",\n                    placeholder: infor.name,\n                    value: user.name,\n                    className: \"userUpdateInput\",\n                    onChange: onChangeInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"userUpdateItem\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Phone\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"phone\",\n                    value: user.phone,\n                    placeholder: infor.phone,\n                    className: \"userUpdateInput\",\n                    onChange: onChangeInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"userUpdateItem\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"address\",\n                    value: user.address,\n                    placeholder: infor.address,\n                    className: \"userUpdateInput\",\n                    onChange: onChangeInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"userUpdateButton\",\n                  type: \"submit\",\n                  children: \"Update Info\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"userUpdateRigh\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"userUpdatePass\",\n                onSubmit: updatePassword,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"userUpdateItem\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"password\",\n                    className: \"userUpdateInput\",\n                    placeholder: \"Password\",\n                    name: \"password\",\n                    value: user.password,\n                    onChange: onChangeInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"userUpdateItem\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"New Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"password\",\n                    placeholder: \"New pass word if you want\",\n                    className: \"userUpdateInput\",\n                    name: \"newPassword\",\n                    value: user.newPassword,\n                    onChange: onChangeInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"userUpdateItem\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Confirm New Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"password\",\n                    placeholder: \"Confirm new password\",\n                    className: \"userUpdateInput\",\n                    name: \"confirmNewpass\",\n                    value: user.confirmNewpass,\n                    onChange: onChangeInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"userUpdateButton update-password-btn\",\n                    type: \"submit\",\n                    children: \"Update Pass\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 228,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"warning\",\n                    children: [\"* If you change password. \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 51\n                    }, this), \"Login the next time you will remember\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"You must login to access!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(Profile, \"7T6v2HCujPKrJ1B6wM1+p1i9mMI=\");\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["E:/HK1_Nam4/TLCN/bookstore_website/client/src/features/infor/profile/Profile.js"],"names":["React","useContext","useState","GlobalState","axios","dateFormat","AccountCircle","PermIdentity","Settings","Profile","state","isLogged","userApi","infor","token","user","setUser","name","address","phone","password","newPassword","confirmNewpass","onChangeInput","e","value","target","updateInfo","preventDefault","console","log","result","patch","headers","Authorization","alert","data","msg","window","location","href","err","response","updatePassword","length","email","role","createdAt","updatedAt"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport \"./profile.css\";\r\nimport { GlobalState } from \"../../../GlobalState\";\r\nimport axios from \"axios\";\r\n\r\nimport dateFormat from \"dateformat\";\r\nimport { AccountCircle, PermIdentity, Settings } from \"@material-ui/icons\";\r\n\r\nexport default function Profile() {\r\n  const state = useContext(GlobalState);\r\n  const [isLogged] = state.userApi.isLogged;\r\n  const [infor] = state.userApi.infor;\r\n  const [token] = state.token;\r\n\r\n  const [user, setUser] = useState({\r\n    name: \"\",\r\n    address: \"\",\r\n    phone: \"\",\r\n    password: \"\",\r\n    newPassword: \"\",\r\n    confirmNewpass: \"\",\r\n  });\r\n  const { name, address, phone, password, newPassword, confirmNewpass } = user;\r\n  const onChangeInput = (e) => {\r\n    const { name, value } = e.target;\r\n    setUser({ ...user, [name]: value });\r\n  };\r\n\r\n  //update info\r\n  const updateInfo = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      console.log(token);\r\n      const result = await axios.patch(\r\n        \"/user/update\",\r\n        {\r\n          name: name ? name : infor.name,\r\n          address: address ? address : infor.address,\r\n          phone: phone ? phone : infor.phone,\r\n        },\r\n        {\r\n          headers: { Authorization: token },\r\n        }\r\n      );\r\n      alert(result.data.msg);\r\n      window.location.href = \"/infor\";\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  //update password\r\n  const updatePassword = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      console.log(token);\r\n      if (password === \"\" || newPassword === \"\" || confirmNewpass === \"\")\r\n        return setUser(\r\n          { ...user },\r\n          alert(\"Require input if you want change password\")\r\n        );\r\n\r\n      if (newPassword.length < 6)\r\n        return setUser(\r\n          { ...user },\r\n          alert(\"New password must be least 6 character\")\r\n        );\r\n      if (newPassword !== confirmNewpass)\r\n        return setUser(\r\n          { ...user },\r\n          alert(\"Confirm new password does not match!\")\r\n        );\r\n\r\n      const result = await axios.patch(\r\n        \"/user/change\",\r\n        {\r\n          password: password,\r\n          newPassword: newPassword,\r\n        },\r\n        {\r\n          headers: { Authorization: token },\r\n        }\r\n      );\r\n      window.location.href = \"/infor\";\r\n      alert(result.data.msg);\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      {isLogged ? (\r\n        <div className=\"user\">\r\n          <div className=\"userTitleContainer\">\r\n            <h1 className=\"userTitle\">\r\n              <Settings className=\"userTitleIcon\" />\r\n              My Profile\r\n            </h1>\r\n          </div>\r\n          <div className=\"userContainer\">\r\n            <div className=\"userShow\">\r\n              <div className=\"userShowTop\">\r\n                <AccountCircle className=\"userShowImg\" />\r\n                <div className=\"userShowTopTitle\">\r\n                  <span className=\"userShowUsername\">{infor.email}</span>\r\n                  <span className=\"userShowUserTitle\">{infor.name}</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"userShowBottom\">\r\n                <span className=\"userShowTitle\">Account Detail</span>\r\n                <div className=\"userShowInfo\">\r\n                  <PermIdentity className=\"userShowIcon\" />\r\n                  <span className=\"userShowInfoTitle\">Name: {infor.name}</span>\r\n                </div>\r\n                <div className=\"userShowInfo\">\r\n                  <PermIdentity className=\"userShowIcon\" />\r\n                  <span className=\"userShowInfoTitle\">\r\n                    Phone: {infor.phone}\r\n                  </span>\r\n                </div>\r\n                <div className=\"userShowInfo\">\r\n                  <PermIdentity className=\"userShowIcon\" />\r\n                  <span className=\"userShowInfoTitle\">\r\n                    Address: {infor.address}\r\n                  </span>\r\n                </div>\r\n                <div className=\"userShowInfo\">\r\n                  <PermIdentity className=\"userShowIcon\" />\r\n                  <span className=\"userShowInfoTitle\">\r\n                    Role: {infor.role === 0 ? \"User Account\" : \"Admin Account\"}\r\n                  </span>\r\n                </div>\r\n                <div className=\"userShowInfo\">\r\n                  <PermIdentity className=\"userShowIcon\" />\r\n                  <span className=\"userShowInfoTitle\">\r\n                    Date join: {dateFormat(infor.createdAt)}\r\n                  </span>\r\n                </div>\r\n                <div className=\"userShowInfo\">\r\n                  <PermIdentity className=\"userShowIcon\" />\r\n                  <span className=\"userShowInfoTitle\">\r\n                    Last update: {dateFormat(infor.updatedAt)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"userUpdate\">\r\n              <span className=\"userUpdateTitle\">Edit Information</span>\r\n              <div className=\"userUpdateContainer\">\r\n                <div className=\"userUpdateLeft\">\r\n                  <form className=\"userUpdateInfo\" onSubmit={updateInfo}>\r\n                    <div className=\"userUpdateItem\">\r\n                      <label>Name</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"name\"\r\n                        placeholder={infor.name}\r\n                        value={user.name}\r\n                        className=\"userUpdateInput\"\r\n                        onChange={onChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div className=\"userUpdateItem\">\r\n                      <label>Phone</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"phone\"\r\n                        value={user.phone}\r\n                        placeholder={infor.phone}\r\n                        className=\"userUpdateInput\"\r\n                        onChange={onChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div className=\"userUpdateItem\">\r\n                      <label>Address</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"address\"\r\n                        value={user.address}\r\n                        placeholder={infor.address}\r\n                        className=\"userUpdateInput\"\r\n                        onChange={onChangeInput}\r\n                      />\r\n                    </div>\r\n\r\n                    <button className=\"userUpdateButton\" type=\"submit\">\r\n                      Update Info\r\n                    </button>\r\n                  </form>\r\n                </div>\r\n                <div className=\"userUpdateRigh\">\r\n                  <form className=\"userUpdatePass\" onSubmit={updatePassword}>\r\n                    <div className=\"userUpdateItem\">\r\n                      <label>Password</label>\r\n                      <input\r\n                        type=\"password\"\r\n                        className=\"userUpdateInput\"\r\n                        placeholder=\"Password\"\r\n                        name=\"password\"\r\n                        value={user.password}\r\n                        onChange={onChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div className=\"userUpdateItem\">\r\n                      <label>New Password</label>\r\n                      <input\r\n                        type=\"password\"\r\n                        placeholder=\"New pass word if you want\"\r\n                        className=\"userUpdateInput\"\r\n                        name=\"newPassword\"\r\n                        value={user.newPassword}\r\n                        onChange={onChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div className=\"userUpdateItem\">\r\n                      <label>Confirm New Password</label>\r\n                      <input\r\n                        type=\"password\"\r\n                        placeholder=\"Confirm new password\"\r\n                        className=\"userUpdateInput\"\r\n                        name=\"confirmNewpass\"\r\n                        value={user.confirmNewpass}\r\n                        onChange={onChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div className=\"row\">\r\n                      <button\r\n                        className=\"userUpdateButton update-password-btn\"\r\n                        type=\"submit\"\r\n                      >\r\n                        Update Pass\r\n                      </button>\r\n                      <span className=\"warning\">\r\n                        * If you change password. <br />\r\n                        Login the next time you will remember\r\n                      </span>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <h1>You must login to access!</h1>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}